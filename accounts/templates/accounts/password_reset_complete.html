<!-- password_reset_complete.html بهبود یافته -->
{% extends "core/base.html" %}
{% block content %}
{% load static %}

<link rel="stylesheet" href="{% static 'css/auth.css' %}">

<div class="auth-hero">
    <div class="container">
        <h1>Password Changed</h1>
        <p class="lead">Your password has been successfully reset</p>
    </div>
</div>

<div class="container auth-container">
    <div class="row justify-content-center">
        <div class="col-lg-6 col-md-8">
            <div class="auth-card text-center">
                <div class="auth-header">
                    <div class="logo-circle mb-4 success-animation">
                        <i class="fas fa-check"></i>
                    </div>
                    <h2>Password Reset Complete!</h2>
                    <p class="text-muted">Your password has been changed successfully</p>
                </div>

                <div class="success-message">
                    <p class="mb-4">
                        <i class="fas fa-check-circle text-success mr-2"></i>
                        You can now log in with your new password.
                    </p>
                    
                    <div class="mt-5">
                        <a href="{% url 'accounts:login' %}" class="btn-auth btn-auth-primary btn-block">
                            <i class="fas fa-sign-in-alt mr-2"></i> Login Now
                        </a>
                        
                        <a href="/" class="btn-auth btn-auth-secondary btn-block mt-3">
                            <i class="fas fa-home mr-2"></i> Go to Homepage
                        </a>
                    </div>
                </div>

                <div class="auth-info-card mt-5">
                    <h5><i class="fas fa-lightbulb text-primary mr-2"></i> Security Recommendations</h5>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="feature-item mb-3">
                                <i class="fas fa-user-shield feature-icon"></i>
                                <span>Enable 2FA if available</span>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="feature-item mb-3">
                                <i class="fas fa-history feature-icon"></i>
                                <span>Review login history</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .success-animation {
        animation: successPulse 2s infinite;
    }
    
    @keyframes successPulse {
        0% {
            box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.4);
        }
        70% {
            box-shadow: 0 0 0 20px rgba(40, 167, 69, 0);
        }
        100% {
            box-shadow: 0 0 0 0 rgba(40, 167, 69, 0);
        }
    }
    
    .success-message {
        padding: 30px 0;
    }
    
    .success-message p {
        font-size: 16px;
        color: var(--text-dark);
        line-height: 1.6;
    }
    
    .btn-auth-primary {
        max-width: 300px;
        margin: 0 auto;
    }
    
    .btn-auth-secondary {
        max-width: 300px;
        margin: 0 auto;
        background: transparent;
        color: var(--secondary-medium-blue);
        border: 2px solid var(--secondary-medium-blue);
    }
    
    .btn-auth-secondary:hover {
        background: var(--secondary-medium-blue);
        color: white;
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // انیمیشن ورود
        const elements = document.querySelectorAll('.auth-card, .success-message, .auth-info-card');
        elements.forEach((element, index) => {
            element.style.animationDelay = `${index * 0.2}s`;
            element.classList.add('animate__animated', 'animate__fadeInUp');
        });
        
        // ریدایرکت خودکار بعد از 10 ثانیه
        setTimeout(() => {
            const redirectElement = document.createElement('div');
            redirectElement.className = 'mt-4 text-center';
            redirectElement.innerHTML = `
                <p class="small text-muted">
                    <i class="fas fa-clock mr-1"></i>
                    Redirecting to login page in <span id="countdown">10</span> seconds...
                </p>
            `;
            document.querySelector('.success-message').appendChild(redirectElement);
            
            let countdown = 10;
            const countdownElement = document.getElementById('countdown');
            const countdownInterval = setInterval(() => {
                countdown--;
                countdownElement.textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(countdownInterval);
                    window.location.href = "{% url 'accounts:login' %}";
                }
            }, 1000);
        }, 3000);
    });
</script>
{% endblock %}